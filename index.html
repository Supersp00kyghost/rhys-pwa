<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rhys Connection</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* --- CORE STYLES --- */
        body {
            background-color: #121212; color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex; flex-direction: column; height: 100dvh; margin: 0; overflow: hidden;
        }

        /* --- HEADER --- */
        header {
            padding: 15px; background-color: #1e1e1e; border-bottom: 1px solid #333;
            display: flex; justify-content: space-between; align-items: center;
        }
        h1 { margin: 0; font-size: 18px; color: #4facfe; font-weight: 600; }
        .header-icons { display: flex; gap: 15px; }
        .icon-btn { background: none; border: none; font-size: 20px; cursor: pointer; color: #888; }
        .icon-btn:hover { color: #fff; }

        /* --- CHAT AREA --- */
        #chat-container { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
        
        .message-row { display: flex; flex-direction: column; max-width: 100%; gap: 6px; }
        .message-row.user { align-items: flex-end; }
        .message-row.ai { align-items: flex-start; }

        /* METADATA (Name + Time) - Made brighter */
        .meta { font-size: 12px; color: #888; margin: 0 5px; font-weight: 500; }
        
        .content-group { display: flex; align-items: flex-end; gap: 10px; }
        .user .content-group { flex-direction: row-reverse; }
        
        .avatar { width: 38px; height: 38px; border-radius: 50%; object-fit: cover; border: 2px solid #333; flex-shrink: 0; }
        
        .bubble { max-width: 75vw; padding: 12px 16px; border-radius: 18px; font-size: 15px; line-height: 1.5; word-wrap: break-word; }
        .user .bubble { background-color: #4facfe; color: #fff; border-bottom-right-radius: 4px; }
        .ai .bubble { background-color: #2c2c2c; color: #e0e0e0; border-bottom-left-radius: 4px; border: 1px solid #333; }
        
        .bubble p { margin: 0; margin-bottom: 8px; }
        .bubble p:last-child { margin-bottom: 0; }
        .bubble em { color: #ccc; font-style: italic; }
        .user .bubble em { color: #e
